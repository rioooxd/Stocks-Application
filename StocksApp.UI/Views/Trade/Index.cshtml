@model             StockTrade

@{
 ViewBag.Title = "Trading";
 ViewBag.CurrentUrl = "~/Trade/Index";
}

<form asp-controller="Trade" asp-action="Orders" method="post">
<div class="box trading-panel">

    <div class="flex trading-panel-flex">
        <div id="stock-price-panel">

            <div class="stock">
                <h1 class="stock-title">@Model.StockName (@Model.StockSymbol)</h1>
                <h2 class="stock-price"><small class="text-grey">$</small> <span class="price">@Model.Price.ToString("N")</span></h2>
            </div>

            <div class="date"></div>
        </div>
                
 <div id="new-order-panel">
      <div class="flex flex-direction-vertical">
          <h2 class="text-grey mb">New Order</h2>

          <label for="Quantity" class="mt">Quantity:</label>
          <div class="w-15">
                            <input type="number" id="Quantity" name="Quantity" value="@Model.Quantity" min="1" max="10000" placeholder="Quantity" required="required" class="form-input mb" autofocus />
          </div>

          <div class="button-panel">
                  <button type="submit" asp-controller="Trade" asp-action="SellOrder" class="button button-red-back trading-button">
                  <i class="fa-solid fa-arrow-down"></i>
                  <span>Sell</span>
              </button>

              <button type="submit" asp-controller="Trade" asp-action="BuyOrder" class="button button-green-back trading-button">
                  <i class="fa-solid fa-arrow-up"></i>
                  <span>Buy</span>
              </button>


                @if (ViewBag.Errors != null)
                {
                    <div class="text-red mt">
                        <ul>
                            @foreach (string error in ViewBag.Errors)
                            {
                                <li class="ml">@error</li>
                            }
                        </ul>
                    </div>
                }
          </div>
      </div>
      
  </div>
  </div>
 </div>


<input type="hidden" name="StockSymbol" id="StockSymbol" value="@Model.StockSymbol" />
<input type="hidden" name="StockName" id="StockName" value="@Model.StockName" />
<input type="hidden" name="Price" id="price" value="@Model.Price" />
<input type="hidden" id="FinnhubToken" value="@ViewBag.FinnhubToken" />

</form>

@section scripts{
    <script src="~/Scripts/FinnhubScript.js"></script>
    
}